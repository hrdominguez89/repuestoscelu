{% extends 'home/index.html.twig' %}

{% block title %}
	{{ title }}
{% endblock %}

{% block content %}
	{{parent()}}
	<!-- Modal -->
	<div class="modal fade" id="modalDelete" tabindex="-1" aria-labelledby="modalDeleteLabel" aria-hidden="true">
		<div class="modal-dialog">
			<div class="modal-content">
				<div class="modal-header">
					<h1 class="modal-title fs-5" id="modalDeleteLabel">Eliminar imagen</h1>
					<button type="button" class="btn-close" data-bs-dismiss="modal" aria-label="Close"></button>
				</div>
				<div class="modal-body">
					¿Está seguro que desea eliminar esta imagen? una vez eliminada no se podrá recuperar.
				</div>
				<div class="modal-footer">
					<button type="button" class="btn btn-secondary" data-bs-dismiss="modal">Cerrar</button>
					<button id="deleteImage" href="javascript:void(0);" type="button" class="btn btn-danger">Eliminar</button>
				</div>
			</div>
		</div>
	</div>

	<div class="row">
		<div class="col-12">
			<h1 class="mr-auto mb-0 title-table">{{ title }}</h1>
		</div>
	</div>

	{{ form_start (form) }}

	{% if form_errors (form) %}
		<div class="row">
			<div class="col-12">
				<div class="alert alert-danger">
					{{ form_errors (form) }}
				</div>
			</div>
		</div>
	{% endif %}

	{# DATOS PRODUCTO #}

	<div class="row my-2">
		<div class="col-12">
			{{ form_label (form.inventory) }}
			{{ form_widget (form.inventory) }}
			{{ form_errors (form.inventory)}}
		</div>
	</div>
	<div class="row my-2">
		<div class="col-12">
			{{ form_label (form.name) }}
			{{ form_widget (form.name) }}
			{{ form_errors (form.name)}}
		</div>
	</div>

	<div class="row my-2">
		<div class="col-6">
			{{ form_label (form.descriptionEs) }}
			{{ form_widget (form.descriptionEs) }}
			{{ form_errors (form.descriptionEs)}}
		</div>


		<div class="col-6">
			{{ form_label (form.long_description_es) }}
			{{ form_widget (form.long_description_es) }}
			{{ form_errors (form.long_description_es)}}
		</div>
	</div>


	<div class="row my-2">
		<div class="col-6">
			{{ form_label (form.descriptionEn) }}
			{{ form_widget (form.descriptionEn) }}
			{{ form_errors (form.descriptionEn)}}
		</div>


		<div class="col-6">
			{{ form_label (form.long_description_en) }}
			{{ form_widget (form.long_description_en) }}
			{{ form_errors (form.long_description_en)}}
		</div>
	</div>

	{# FIN DATOS PRODUCTO #}

	<hr>

	{# SKU #}

	<div class="row my-2">
		<div class="col-12">
			<h3>SKU</h3>
			<small>Se conforma automaticamente de la siguiente manera:
			</small>
			<small>CAT-MAR-MOD310-COL-VP1[-VP2-VP3] | (VP2 y VP3 son opcionales)</small>
		</div>
	</div>
	<div class="row my-3">

		<div class="col-3">
			{{ form_label (
				form.subcategory,
				'Categoría *',
				{'label_attr': {'class': 'form-label','id':'label-category','data-category-id':product.category ? product.category.id:'0'}}
			)}}
			{{ form_widget (form.category) }}
			{{ form_errors (form.category)}}
		</div>

		<div class="col-3">
			{{ form_label (
				form.subcategory,
				'Subcategoría',
				{'label_attr': {'class': 'form-label','id':'label-subcategory','data-subcategory-id':product.subcategory ? product.subcategory.id:'0'}}
			)}}
			{{ form_widget (form.subcategory) }}
			{{ form_errors (form.subcategory)}}
		</div>

		<div class="col-3">
			{{ form_label (form.brand) }}
			{{ form_widget (form.brand) }}
			{{ form_errors (form.brand)}}
		</div>

		<div class="col-3">
			{{ form_label (form.model) }}
			{{ form_widget (form.model) }}
			{{ form_errors (form.model)}}
		</div>
	</div>
	<div class="row my-3">

		<div class="col-3">
			{{ form_label (form.color) }}
			{{ form_widget (form.color) }}
			{{ form_errors (form.color)}}
		</div>

		<div class="col-3">
			{{ form_label (form.vp1) }}
			{{ form_widget (form.vp1) }}
			{{ form_errors (form.vp1)}}
		</div>

		<div class="col-3">
			{{ form_label (form.vp2) }}
			{{ form_widget (form.vp2) }}
			{{ form_errors (form.vp2)}}
		</div>

		<div class="col-3">
			{{ form_label (form.vp3) }}
			{{ form_widget (form.vp3) }}
			{{ form_errors (form.vp3)}}
		</div>
		<div class="row my-3">

			<div class="col-12 text-center">
				<div class="row">
					<div class="col-4"></div>

					<div class="col-4">
						{{ form_label (
							form.sku,
							'SKU',
							{'label_attr': {'class': 'form-label','id':'label-sku','data-product-id':product.id ? product.id:'0'}}
						)}}
						{{ form_widget (form.sku) }}
						{% if form_errors (form.sku) %}
							<div class="row">
								<div class="col-12">
									<div class="alert alert-danger">
										<span>{{ form_errors (form.sku) }}.</span>
									</div>
								</div>
							</div>
						{% endif %}
						<span id="message_sku">Complete todos los campos para verificar la disponibilidad del SKU.</span>
					</div>

					<div class="col-4"></div>
				</div>

			</div>
		</div>
	</div>
	{# FIN SKU #}

	<hr>

	{# CARACTERISTICAS #}

	<div class="row my-3">

		<div class="row my-2">
			<div class="col-12">
				<h3>Caracteristicas</h3>
			</div>
			<div class="col-3">
				{{ form_label (form.cost) }}
				{{ form_widget (form.cost) }}
				{{ form_errors (form.cost)}}
			</div>

			<div class="col-3">
				{{ form_label (form.price) }}
				{{ form_widget (form.price) }}
				{{ form_errors (form.price)}}
			</div>

			<div class="col-3">
				{{ form_label (form.cod) }}
				{{ form_widget (form.cod) }}
				{{ form_errors (form.cod)}}
			</div>
			<div class="col-3">
				{{ form_label (form.part_number) }}
				{{ form_widget (form.part_number) }}
				{{ form_errors (form.part_number)}}
			</div>
		</div>

		<div class="row my-2">
			<div class="col-4">
				{{ form_label (form.weight) }}
				{{ form_widget (form.weight) }}
				{{ form_errors (form.weight)}}
			</div>

			<div class="col-4">
				{{ form_label (form.screen_resolution) }}
				{{ form_widget (form.screen_resolution) }}
				{{ form_errors (form.screen_resolution)}}
			</div>

			<div class="col-4">
				{{ form_label (form.screen_size) }}
				{{ form_widget (form.screen_size) }}
				{{ form_errors (form.screen_size)}}
			</div>
		</div>
		<div class="row my-2">
			<div class="col-4">
				{{ form_label (form.cpu) }}
				{{ form_widget (form.cpu) }}
				{{ form_errors (form.cpu)}}
			</div>
			<div class="col-4">
				{{ form_label (form.gpu) }}
				{{ form_widget (form.gpu) }}
				{{ form_errors (form.gpu)}}
			</div>

			<div class="col-4">
				{{ form_label (form.memory) }}
				{{ form_widget (form.memory) }}
				{{ form_errors (form.memory)}}
			</div>
		</div>

		<div class="row mt-2 mb-4">

			<div class="col-4">
				{{ form_label (form.storage) }}
				{{ form_widget (form.storage) }}
				{{ form_errors (form.storage)}}
			</div>
			<div class="col-4">
				{{ form_label (form.op_sys) }}
				{{ form_widget (form.op_sys) }}
				{{ form_errors (form.op_sys)}}
			</div>

			<div class="col-4">
				{{ form_label (form.conditium) }}
				{{ form_widget (form.conditium) }}
				{{ form_errors (form.conditium)}}
			</div>
		</div>
	</div>
	{# FIN CARACTERISTICAS #}

	{# GALERIA #}
	{% if (product.getImage|length > 0) %}
		<div id="images_galery_div my-2">
			<hr>
			<div class="row my-3">
				<div class="row my-2">
					<h3>Imágenes cargadas</h3>
					<div class="col-12 my-2">
						<ul class="pgwSlideshow">
							{% for image in product.getImage %}
								<li id="img-{{image.id}}" data-id="{{image.id}}" data-principal-image="{{image.principal}}">
									<img src="{{ image.image }}" id="imagen-{{image.id}}">

									{% if (image.principal) %}
										<p id="p-portada" data-image-id="{{image.id}}" class="text-center text-black bg-white m-0 p-0 b-0">Portada</p>
									{% endif %}

								</li>
							{% endfor %}
						</ul>
					</div>
				</div>

				<div class="col-12 text-center my-2">
					<a class="text-danger" href="javascript:void(0);" data-bs-toggle="modal" data-bs-target="#modalDelete">
						<spam class="fas fa-trash"></spam>
						Eliminar imagen
					</a>
					|
					<a class="text-primary" id="principalImageButton" href="javascript:void(0);">
						<spam class="fas fa-images"></spam>
						Establecer como imagen de portada
					</a>
				</div>
			</div>
		</div>


	{% endif %}


	<hr>
	<div class="row my-2">
		<div class="col-12">
			<h3>Cargar imágenes</h3>
			{% if not product.getImage|length > 0 %}
				<small>(La primer imagen será considerada la imagen de portada)</small>
			{% endif %}
			{{ form_widget (form.images) }}
			{{ form_errors (form.images)}}
			<div id="drag-drop-area"></div>
		</div>
	</div>
	<div>
		<div class="row my-2">
			<div class="col-12 text-end">
				<a class="btn btn-secondary" href="{{ path('secure_product_index') }}">Regresar</a>

				<button class="btn btn-primary">Guardar</button>
			</div>
		</div>
	</div>
	{{ form_end (form) }}
{% endblock %}
